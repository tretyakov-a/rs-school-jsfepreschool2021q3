(()=>{var __webpack_modules__={925:module=>{module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('<div class="lds-ring">\n  <div></div>\n  <div></div>\n  <div></div>\n  <div></div>\n</div>');return __output}},416:(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('<div class="movie-card-full">\n  <div class="movie-card-full__poster-container">\n    <img class="movie-card-full__poster poster" src="'),__append(escapeFn(locals.Poster)),__append('" alt="'),__append(escapeFn(locals.Title)),__append('">\n  </div>\n  <div class="movie-card-full__info-block">\n    <h2 class="movie-card-full__title">'),__append(escapeFn(locals.Title)),__append('</h2>\n    <div class="movie-card-full__content">\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-content">'),__append(escapeFn(locals.Plot)),__append('</span>\n      </div>\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-title">Country:</span>\n        <span class="movie-card-full__row-content">\n          '),__append(escapeFn(locals.Country)),__append(",&nbsp;"),__append(escapeFn(locals.Year)),__append('\n        </span>\n      </div>\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-title">Director:</span>\n        <span class="movie-card-full__row-content">'),__append(escapeFn(locals.Director)),__append('</span>\n      </div>\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-title">Writer:</span>\n        <span class="movie-card-full__row-content">'),__append(escapeFn(locals.Writer)),__append('</span>\n      </div>\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-title">Actors:</span>\n        <span class="movie-card-full__row-content">'),__append(escapeFn(locals.Actors)),__append('</span>\n      </div>\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-title">Release date:</span>\n        <span class="movie-card-full__row-content">'),__append(escapeFn(locals.Released)),__append('</span>\n      </div>\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-title">Runtime:</span>\n        <span class="movie-card-full__row-content">'),__append(escapeFn(locals.Runtime)),__append('</span>\n      </div>\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-title">Box office:</span>\n        <span class="movie-card-full__row-content">'),__append(escapeFn(locals.BoxOffice)),__append('</span>\n      </div>\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-title">Awards:</span>\n        <span class="movie-card-full__row-content">'),__append(escapeFn(locals.Awards)),__append('</span>\n      </div>\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-title">DVD:</span>\n        <span class="movie-card-full__row-content">'),__append(escapeFn(locals.DVD)),__append('</span>\n      </div>\n      <div class="movie-card-full__row">\n        <span class="movie-card-full__row-title">Rated:</span>\n        <span class="movie-card-full__row-content">'),__append(escapeFn(locals.Rated)),__append('</span>\n      </div>\n      <div class="movie-card-full__ratings">\n        <span class="movie-card-full__ratings-item">\n          <img src="'),__append(escapeFn(__webpack_require__(58))),__append('" alt="imdb" width="35" height="17">\n          '),__append(escapeFn(locals.imdbRating)),__append('&nbsp;/&nbsp;10\n        </span>\n        <span class="movie-card-full__ratings-item">\n          <img src="'),__append(escapeFn(__webpack_require__(654))),__append('" alt="rotten tomatoes" width="16" height="17">\n          '),__append(escapeFn(locals.Metascore)),__append("%\n        </span>\n      </div>\n    </div>\n  </div>\n</div>");return __output}},816:(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('<li class="movies-list__item movie-card" data-id="'),__append(escapeFn(locals.imdbID)),__append('">\n  <div class="movie-card__poster-container">\n    <div class="movie-card__movie-type">'),__append(escapeFn(locals.Type)),__append('</div>\n    <img class="movie-card__poster poster" src="'),__append(escapeFn(locals.Poster)),__append('" alt="'),__append(escapeFn(locals.Title)),__append('">\n  </div>\n  <div class="movie-card__text-content">\n    <div class="movie-card__info">\n      <span class="movie-card__country">'),__append(escapeFn(locals.Country)),__append('</span>,&nbsp;\n      <span class="movie-card__year">'),__append(escapeFn(locals.Year)),__append('</span>\n    </div>\n    <h2 class="movie-card__title">'),__append(escapeFn(locals.Title)),__append('</h2>\n    <div class="movie-card__ratings">\n      <span class="movie-card__imdb">\n        <img src="'),__append(escapeFn(__webpack_require__(58))),__append('" alt="imdb" width="35" height="17">\n        '),__append(escapeFn(locals.imdbRating)),__append('&nbsp;/&nbsp;10\n      </span>\n      <span class="movie-card__metascore">\n        <img src="'),__append(escapeFn(__webpack_require__(654))),__append('" alt="rotten tomatoes" width="16" height="17">\n        '),__append(escapeFn(locals.Metascore)),__append('%\n      </span>\n    </div>\n    <div class="movie-card__info">\n      <span class="movie-card__genre">'),__append(escapeFn(locals.Genre)),__append("</span>\n    </div>\n  </div>\n</li>\n");return __output}},162:module=>{module.exports=function anonymous(locals,escapeFn,include,rethrow){escapeFn=escapeFn||function(e){return null==e?"":String(e).replace(_MATCH_HTML,encode_char)};var _ENCODE_HTML_RULES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},_MATCH_HTML=/[&<>'"]/g;function encode_char(e){return _ENCODE_HTML_RULES[e]||e}var __output="";function __append(e){null!=e&&(__output+=e)}with(locals||{})__append('<li data-id="'),__append(escapeFn(locals.imdbID)),__append('">\n  '),__append(escapeFn(locals.Title)),__append("&nbsp;("),__append(escapeFn(locals.Year)),__append(")\n</li>");return __output}},58:(e,a,n)=>{"use strict";e.exports=n.p+"images/imdb-099759c1.png"},110:(e,a,n)=>{"use strict";e.exports=n.p+"images/img-placeholder-ee97e8e7.svg"},654:(e,a,n)=>{"use strict";e.exports=n.p+"images/rotten-2c0a99f7.png"}},__webpack_module_cache__={};function __webpack_require__(e){var a=__webpack_module_cache__[e];if(void 0!==a)return a.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(a,{a}),a},__webpack_require__.d=(e,a)=>{for(var n in a)__webpack_require__.o(a,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})},__webpack_require__.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),__webpack_require__.p="/";var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(816),a=__webpack_require__.n(e);function n(e){return e.reduce(((e,n)=>e+function(e){return a()(e)}(n)),"")}var _=__webpack_require__(416),s=__webpack_require__.n(_),c=__webpack_require__(162),t=__webpack_require__.n(c),r=__webpack_require__(925),p=__webpack_require__.n(r);var o=__webpack_require__(110);const i=document.querySelector(".search-form"),l=i.querySelector(".search-form__input"),d=i.querySelector(".search-form__search-list"),u=document.querySelector(".movies-list"),v=document.querySelector(".popup"),m=new class{constructor(){this.apiKey="2b2733ee",this.baseQuery=`http://www.omdbapi.com/?apikey=${this.apiKey}&`,this.searchQuery=`${this.baseQuery}s=`,this.titleQuery=`${this.baseQuery}t=`,this.idQuery=`${this.baseQuery}i=`}_getSearchQuery(e){return this.searchQuery+encodeURIComponent(e)}_getFetchByIdQuery(e){return this.idQuery+encodeURIComponent(e)}_getFetchByTitleQuery(e){return this.titleQuery+encodeURIComponent(e)}_fetch=async e=>{try{const a=await fetch(e);return await a.json()}catch(e){console.error(e)}};async search(e){return await this._fetch(this._getSearchQuery(e))}async fetchMovieByTitle(e){return await this._fetch(this._getFetchByTitleQuery(e))}async fetchMovieById(e){return await this._fetch(this._getFetchByIdQuery(e))}async fetchMoviesById(e){try{return await Promise.all(e.map((e=>this._fetch(this._getFetchByIdQuery(e)))))}catch(e){console.error(e)}}};let f={search:null,data:null},h="",w=null;const y='<p style="padding-left: 10px;">No movies found</p>';async function b(e){e&&e.preventDefault(),M();const a=l.value;if(""===a)return;const _=await T(a);if(f.search!==h){let e=null;if(_.Search){u.innerHTML=p()();const a=_.Search.map((({imdbID:e})=>e)),s=await m.fetchMoviesById(a);f.search=h,f.data=s,e=n(s),g(u)}u.innerHTML=e||y}}function g(e){setTimeout((()=>{const a=e.querySelectorAll(".poster");for(const e of a)e.addEventListener("error",F)}))}function F(e){e.target.src=o,e.target.removeEventListener("error",F)}function L(e,a){return e&&!e.path.find((e=>e.classList&&e.classList.contains(a)))}async function T(e){let a=null;return e===h?a=w:(a=await m.search(e),h=e,w=a),a}function M(){d.classList.remove("search-form__search-list_show")}i.addEventListener("submit",b),l.addEventListener("input",((e,a)=>{let n=null;return function(..._){clearTimeout(n),n=setTimeout((()=>{a(..._)}),e)}})(500,(async function(e){const a=e.target.value;if(""===a)return void M();d.classList.add("search-form__search-list_show"),d.innerHTML=p()();const n=await T(a);let _=null;n.Search&&(_=n.Search.map((e=>t()(e))).join("")),d.innerHTML=_||y}))),d.addEventListener("click",(async function(e){if(u.innerHTML=p()(),e.target.dataset){M();const a=e.target.dataset.id;l.value="";const _=[await m.fetchMovieById(a)];f.data=_;const s=n(_);u.innerHTML=s,g(u)}})),u.addEventListener("click",(function(e){const a=e.target.closest(".movie-card");if(a){if(!f.data)return;v.classList.add("popup_show");const e=v.querySelector(".popup__card"),n=f.data.find((e=>e.imdbID===a.dataset.id)),_=s()(n);e.innerHTML=_,g(e)}})),v.addEventListener("click",(function(e){L(e,"popup__card")&&v.classList.remove("popup_show")})),document.addEventListener("click",(function(e){L(e,"search-form")&&M()})),l.value="star wars",l.focus(),b()})()})();